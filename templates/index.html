<!DOCTYPE html>

<head>
   <title>Dashboard Temperatura</title>
   
   
   <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
      integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"
      crossorigin="anonymous"
    />
	
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Suez+One&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	
   <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
   
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
   <script src="https://code.jquery.com/jquery-1.11.2.js"></script>
   
   <script src="https://code.highcharts.com/highcharts.js"></script>
   <script src="https://code.highcharts.com/modules/exporting.js"></script>
   <script src="https://code.highcharts.com/modules/export-data.js"></script>
   <script src="https://code.highcharts.com/modules/accessibility.js"></script>
   
   <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
   <script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
      	var socket = io.connect('http://' + document.domain + ':' + location.port);
      	socket.on('connect', function() {
          socket.emit('my event', {data: 'I\'m connected!'});
      	});
      	socket.on('temperature', function(msg) {
         var nDate = new Date();
          $('#hora').text(nDate.getHours() + ' : ' + nDate.getMinutes() +
             ' : ' + nDate.getSeconds() + '').html();
          $('#data').text(nDate.getDate() + ' de ' + (nDate.getMonth()+1) +
             ' de ' + nDate.getFullYear() + '').html();
          $('#temperature').text(msg.data).html();
          
          var x = nDate.getTime(),
          y = parseFloat(msg.data);
          console.log(y);
          if(chartT.series[0].data.length > 40) {
            chartT.series[0].addPoint([x, y], true, true, true);
          } else {
            chartT.series[0].addPoint([x, y], true, false, true);
          }
          
      	});
          var z = document.getElementByClassName("card-grafico");
          if (z.style.width === "300px"){
            chartT.setSize(300);
          } else {
            chartT.setSize(null);
          }
      });
   </script>
</head>
<body>
    <div class="main">
      <div class="wrapper-left">
        <div class="header-temperatura-asfalto">
          <a href="/" class="active">
            <i class="fas fa-road" style="color: #32322c; font-size: 40px"></i>
            <p class="description-header">Temperatura Asfalto</p>
          </a>
        </div>

        <div class="navegacao-dashboard">
          <i class="fas fa-thermometer-three-quarters"></i>
          <p class="dashboard-text">
            <a href="#">Dashboard</a>
          </p>
        </div>
        <div class="navegacao-tabela">
          <i class="fas fa-table"></i>
          <p class="dashboard-text">
            <a class="history-text" href="./historic">Hist처rico</a>
          </p>
        </div>
        <div class="imagem">
          <img
            src="https://www.uema.br/wp-content/uploads/2019/06/UEMA_logo_oficial-4-351x185@2x.png"
          />
        </div>
        <a id="menu-buguer" href="javascript:void(0);" class="icon" onclick="myFunction()">
          <i class="fa fa-bars"></i>
        </a>
      </div>
      <div class="wrapper-middle">
        <div id="myLinks">
          <a href="./">Dashboard</a>
          <br>
          <a href="./historic">Hist처rico</a>
        </div>
      </div>
      <div class="wrapper-right">
        <div class="text">
          <p class="title">Bem vindo!</p>
          <p class="description">Temperatura Revestimento Superficie</p>
        </div>
        <div class="content">
          <div id ="card-temp-id" class="card-temp">
            <div class="info">
              <i class="fas fa-info-circle"></i>
              <div>
                <p>Hoje</p>
                <p id="hora"></p>
                <p id="data"></p>
              </div>
            </div>
            <div class="temperature">
              <!-- <span>%TEMP_VALUE%</span> -->
              <span id="temperature"></span>
              &degC
            </div>
            <div class="local">
              <i class="fas fa-road"></i>
              <p>
                S찾o Luis
                <br />
                Maranh찾o
              </p>
            </div>
          </div>
          <div class="card-grafico" id="chart-temperature">
            <div class="grafico"></div>
          </div>
        </div>
        <div class="development-by">
          <p>Desenvolvido por:</p>
          <p>
            <a href="https://www.linkedin.com/in/gabrielly-moura/">
              Gabrielly Moura &copy</a
            >
          </p>
        </div>
      </div>
    </div>
</body>
<script>
var chartT = new Highcharts.Chart({
  chart:{ renderTo : 'chart-temperature' },
  title: { text: 'Temperatura do Revestimento' },
  series: [{
    showInLegend: false,
    data: []
  }],
  plotOptions: {
    line: { animation: false,
      dataLabels: { enabled: true }
    },
    series: { color: '#39A0ED' }
  },
  xAxis: { type: 'datetime',
    dateTimeLabelFormats: { second: '%H:%M:%S' }
  },
  yAxis: {
    title: { text: 'Temperatura (Celsius)' }
    //title: { text: 'Temperature (Fahrenheit)' }
  },
  credits: { enabled: false },
  responsive: true,
});


function myFunction() {
  var x = document.getElementById("myLinks");
  if (x.style.display === "block") {
    x.style.display = "none";
  } else {
    x.style.display = "block";
  }
}
</script>

</html>
